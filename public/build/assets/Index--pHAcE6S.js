import{d as V,c as $,w as C,f as a,a as z,u as N,h as R,o as t,b as o,e as d,t as I,F as B,r as L,p as U,T as F,l as P,i as m,m as j,g as T}from"./app-BTVi4zqZ.js";import{_ as q}from"./PublicLayout.vue_vue_type_script_setup_true_lang-ulzpU09i.js";const D={class:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8"},E=["content"],M=["content"],S=["content"],A=["content"],G={class:"mb-12"},H={key:0,class:"overflow-hidden rounded-lg bg-gray-900 shadow-lg"},J={class:"aspect-video w-full"},K=["src","title"],O=["src"],Q={key:0,class:"bg-gray-800 px-4 py-2 text-sm text-gray-200"},W={key:1,class:"flex aspect-video items-center justify-center rounded-lg border border-dashed border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-gray-800"},X={key:0,class:"mb-12"},Y={class:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3"},Z=["onClick"],ee={key:1},te={class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},oe=["onClick"],ae=["src","alt"],se={key:2,class:"rounded-lg border border-dashed border-gray-300 bg-gray-100 py-12 text-center text-gray-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400"},le=["src"],ie=V({__name:"Index",props:{videoItems:{},imageItems:{},playlists:{},canLogin:{type:Boolean},canRegister:{type:Boolean}},setup(y){const b=y;function _(l){if(!l)return"";try{const e=new URL(l);if(e.hostname.includes("youtube.com")||e.hostname.includes("youtu.be")){const i=e.hostname==="youtu.be"?e.pathname.slice(1):e.searchParams.get("v");return i?`https://www.youtube.com/embed/${i}`:l}if(e.hostname.includes("vk.com")&&e.pathname.includes("video")){const i=l.match(/video(-?\d+)_(\d+)/);return i?`https://vk.com/video_ext.php?oid=${i[1]}&id=${i[2]}&hd=2`:l}return l}catch{return l}}const p=m(()=>b.videoItems??[]),v=j(0),n=m(()=>p.value[v.value]??null),h=m(()=>b.imageItems??[]),u=j(null),f=T(),r=m(()=>{var l;return(l=f.props.page_seo)==null?void 0:l.media}),x=`${f.props.app_url??""}${route("media.index")}`;return(l,e)=>{var i;return t(),$(q,{title:((i=r.value)==null?void 0:i.meta_title)??"Медиа","can-login":y.canLogin,"can-register":y.canRegister},{default:C(()=>{var k;return[a("div",D,[z(N(R),{title:((k=r.value)==null?void 0:k.meta_title)??"Медиа"},{default:C(()=>{var s,c,g,w;return[(s=r.value)!=null&&s.meta_description?(t(),o("meta",{key:0,name:"description",content:r.value.meta_description},null,8,E)):d("",!0),a("link",{rel:"canonical",href:x}),(c=r.value)!=null&&c.meta_title?(t(),o("meta",{key:1,property:"og:title",content:r.value.meta_title},null,8,M)):d("",!0),(g=r.value)!=null&&g.meta_description?(t(),o("meta",{key:2,property:"og:description",content:r.value.meta_description},null,8,S)):d("",!0),(w=r.value)!=null&&w.og_image?(t(),o("meta",{key:3,property:"og:image",content:r.value.og_image},null,8,A)):d("",!0),a("meta",{property:"og:url",content:x}),e[2]||(e[2]=a("meta",{property:"og:type",content:"website"},null,-1))]}),_:1},8,["title"]),e[7]||(e[7]=a("h1",{class:"mb-8 text-3xl font-bold text-gray-900 dark:text-white"},"Медиа",-1)),a("section",G,[e[4]||(e[4]=a("h2",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"},"Видео",-1)),n.value?(t(),o("div",H,[a("div",J,[n.value.video_url&&_(n.value.video_url)?(t(),o("iframe",{key:0,src:_(n.value.video_url),title:n.value.title??"Видео",class:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,K)):n.value.video_file?(t(),o("video",{key:1,controls:"",class:"h-full w-full",src:n.value.video_file}," Ваш браузер не поддерживает воспроизведение видео. ",8,O)):d("",!0)]),n.value.title?(t(),o("p",Q,I(n.value.title),1)):d("",!0)])):(t(),o("div",W,[...e[3]||(e[3]=[a("span",{class:"text-gray-500 dark:text-gray-400"},"Добавьте видео в админке (Контент → Элементы медиа)",-1)])]))]),p.value.length?(t(),o("section",X,[e[5]||(e[5]=a("h2",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"},"Плейлист",-1)),a("ul",Y,[(t(!0),o(B,null,L(p.value,(s,c)=>(t(),o("li",{key:s.id,class:U(["rounded-lg border transition",c===v.value?"border-amber-500 bg-amber-50 dark:border-amber-400 dark:bg-amber-900/20":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-750"])},[a("button",{type:"button",class:"w-full px-4 py-3 text-left text-sm font-medium text-gray-900 dark:text-white",onClick:g=>v.value=c},I(s.title??`Видео ${c+1}`),9,Z)],2))),128))])])):d("",!0),h.value.length?(t(),o("section",ee,[e[6]||(e[6]=a("h2",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"},"Галерея",-1)),a("div",te,[(t(!0),o(B,null,L(h.value,(s,c)=>(t(),o("button",{key:s.id,type:"button",class:"aspect-square overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-amber-500",onClick:g=>u.value=s.image??null},[s.image?(t(),o("img",{key:0,src:s.image,alt:s.title??`Фото ${c+1}`,class:"h-full w-full object-cover",loading:"lazy"},null,8,ae)):d("",!0)],8,oe))),128))])])):(t(),o("div",se," Изображений пока нет. Добавьте в админке (Контент → Элементы медиа, тип «Изображение»). ")),(t(),$(F,{to:"body"},[u.value?(t(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4",onClick:e[1]||(e[1]=P(s=>u.value=null,["self"]))},[a("button",{type:"button",class:"absolute right-4 top-4 text-white hover:text-gray-300","aria-label":"Закрыть",onClick:e[0]||(e[0]=s=>u.value=null)}," ✕ "),a("img",{src:u.value,alt:"Фото",class:"max-h-full max-w-full object-contain"},null,8,le)])):d("",!0)]))])]}),_:1},8,["title","can-login","can-register"])}}});export{ie as default};
