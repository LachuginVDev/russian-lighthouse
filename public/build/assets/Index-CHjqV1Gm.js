import{d as C,j,k as B,c as k,w as L,a as A,u as E,h as M,f as n,o as t,b as a,F as N,r as R,t as r,e as i,T as V,l as g,m as _,i as z}from"./app-BTVi4zqZ.js";import{_ as F}from"./PublicLayout.vue_vue_type_script_setup_true_lang-ulzpU09i.js";const I={class:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8"},T={key:0,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},$=["disabled","onClick"],D={class:"aspect-[4/3] overflow-hidden rounded-lg bg-gray-200 dark:bg-gray-700"},G=["src","alt"],K={key:1,class:"flex h-full w-full items-center justify-center text-gray-400 dark:text-gray-500"},P={class:"mt-2 font-medium text-gray-900 dark:text-white group-hover:text-amber-600 dark:group-hover:text-amber-400"},S={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},U={key:1,class:"rounded-lg border border-dashed border-gray-300 bg-gray-50 py-12 text-center text-gray-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400"},q={key:0,class:"fixed inset-0 z-50 flex flex-col bg-black/95",role:"dialog","aria-modal":"true","aria-label":"Просмотр альбома"},H={class:"flex shrink-0 items-center justify-between p-4 text-white"},J={class:"text-lg font-semibold"},O={class:"flex max-h-full max-w-full flex-col items-center"},Q=["src","alt"],W={key:1,class:"mt-3 max-w-2xl text-center text-sm text-gray-300"},X={key:2,class:"mt-1 text-xs text-gray-500"},te=C({__name:"Index",props:{albums:{},canLogin:{type:Boolean},canRegister:{type:Boolean}},setup(u){const o=_(null),s=_(0),c=z(()=>{const e=o.value;if(!e||!e.photos.length)return null;const d=Math.max(0,Math.min(s.value,e.photos.length-1));return e.photos[d]});function w(e){e.photos.length&&(o.value=e,s.value=0)}function h(){o.value=null}function p(){const e=o.value;e&&(s.value=s.value>0?s.value-1:e.photos.length-1)}function x(){const e=o.value;e&&(s.value=s.value<e.photos.length-1?s.value+1:0)}function f(e){o.value&&(e.key==="Escape"&&h(),e.key==="ArrowLeft"&&p(),e.key==="ArrowRight"&&x())}return j(()=>window.addEventListener("keydown",f)),B(()=>window.removeEventListener("keydown",f)),(e,d)=>(t(),k(F,{title:"Фотоальбомы","can-login":u.canLogin,"can-register":u.canRegister},{default:L(()=>{var v,y;return[A(E(M),{title:"Фотоальбомы"}),n("div",I,[d[0]||(d[0]=n("h1",{class:"mb-8 text-3xl font-bold text-gray-900 dark:text-white"},"Фотоальбомы",-1)),(v=u.albums)!=null&&v.length?(t(),a("div",T,[(t(!0),a(N,null,R(u.albums,l=>{var m,b;return t(),a("button",{key:l.id,type:"button",class:"group block text-left",disabled:!((m=l.photos)!=null&&m.length),onClick:Y=>w(l)},[n("div",D,[l.cover?(t(),a("img",{key:0,src:l.cover,alt:l.title,class:"h-full w-full object-cover transition group-hover:scale-105",loading:"lazy"},null,8,G)):(t(),a("div",K," Нет фото "))]),n("p",P,r(l.title),1),(b=l.photos)!=null&&b.length?(t(),a("p",S,r(l.photos.length)+" "+r((l.photos.length===1,"фото")),1)):i("",!0)],8,$)}),128))])):(t(),a("p",U," Пока нет альбомов. Добавьте в админке: Контент → Фотоальбомы. "))]),(t(),k(V,{to:"body"},[o.value?(t(),a("div",q,[n("header",H,[n("h2",J,r(o.value.title),1),n("button",{type:"button",class:"rounded p-2 hover:bg-white/10","aria-label":"Закрыть",onClick:h}," ✕ ")]),n("div",{class:"relative flex flex-1 items-center justify-center p-4",onClick:g(h,["self"])},[o.value.photos.length>1?(t(),a("button",{key:0,type:"button",class:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full bg-white/20 p-3 text-white hover:bg-white/30","aria-label":"Назад",onClick:g(p,["stop"])}," ‹ ")):i("",!0),n("div",O,[c.value?(t(),a("img",{key:0,src:c.value.image,alt:c.value.caption??o.value.title,class:"max-h-[70vh] max-w-full object-contain"},null,8,Q)):i("",!0),(y=c.value)!=null&&y.caption?(t(),a("p",W,r(c.value.caption),1)):i("",!0),o.value.photos.length>1?(t(),a("p",X,r(s.value+1)+" / "+r(o.value.photos.length),1)):i("",!0)]),o.value.photos.length>1?(t(),a("button",{key:1,type:"button",class:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/20 p-3 text-white hover:bg-white/30","aria-label":"Вперёд",onClick:g(x,["stop"])}," › ")):i("",!0)])])):i("",!0)]))]}),_:1},8,["can-login","can-register"]))}});export{te as default};
