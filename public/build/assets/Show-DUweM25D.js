import{d as v,c as f,w as c,a as s,b as x,e as b,h as p,o,i as a,j as r,m as w,g as $,F as y,t as k,q as C,T as _,f as B,x as L}from"./app-6f2fcCsN.js";import{_ as j}from"./PublicLayout.vue_vue_type_script_setup_true_lang-BE4tQFZz.js";const T={class:"mx-auto max-w-3xl px-4 py-12 sm:px-6 lg:px-8"},N=["content"],V={class:"mt-4 block text-sm text-gray-500 dark:text-gray-400"},M={class:"mt-2 text-3xl font-bold text-gray-900 dark:text-white"},R=["src","alt"],q=["innerHTML"],F={key:1,class:"mt-10"},H={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},S=["onClick"],U=["src","alt"],z={key:2,class:"mt-10"},D={class:"aspect-video w-full overflow-hidden rounded-lg bg-black"},E=["src"],I={key:3,class:"mt-10"},P={class:"overflow-hidden rounded-lg bg-black"},A=["src"],G=["src"],J={key:1,class:"mt-8 text-gray-500 dark:text-gray-400"},W=v({__name:"Show",props:{id:{},post:{},canLogin:{type:Boolean},canRegister:{type:Boolean}},setup(t){const u=l=>{if(!l)return"";try{const e=new URL(l);if(e.hostname.includes("youtube.com")||e.hostname.includes("youtu.be")){const n=e.hostname==="youtu.be"?e.pathname.slice(1):e.searchParams.get("v");return n?`https://www.youtube.com/embed/${n}`:l}if(e.hostname.includes("vk.com")&&e.pathname.includes("video")){const n=l.match(/video(-?\d+)_(\d+)/);return n?`https://vk.com/video_ext.php?oid=${n[1]}&id=${n[2]}&hd=2`:l}return l}catch{return l}},d=L(null);return(l,e)=>(o(),f(j,{title:"Новость","can-login":t.canLogin,"can-register":t.canRegister},{default:c(()=>{var n,m,g;return[s("div",T,[x(b(p),{title:((n=t.post)==null?void 0:n.meta_title)??((m=t.post)==null?void 0:m.title)??"Новость"},{default:c(()=>{var i;return[(i=t.post)!=null&&i.meta_description?(o(),a("meta",{key:0,name:"description",content:t.post.meta_description},null,8,N)):r("",!0)]}),_:1},8,["title"]),x(b(w),{href:l.route("news.index"),class:"text-sm text-amber-600 hover:text-amber-500 dark:text-amber-400"},{default:c(()=>[...e[2]||(e[2]=[$(" ← К списку новостей ",-1)])]),_:1},8,["href"]),t.post?(o(),a(y,{key:0},[s("time",V,k(t.post.date),1),s("h1",M,k(t.post.title),1),t.post.image?(o(),a("img",{key:0,src:t.post.image,alt:t.post.title,class:"mt-4 w-full rounded-lg object-cover"},null,8,R)):r("",!0),s("div",{class:"mt-6 prose prose-lg prose-gray dark:prose-invert dark:prose-headings:text-white prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-a:text-amber-600 dark:prose-a:text-amber-400 prose-img:rounded-lg max-w-none",innerHTML:t.post.body??""},null,8,q),(g=t.post.images)!=null&&g.length?(o(),a("section",F,[e[3]||(e[3]=s("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Фото",-1)),s("div",H,[(o(!0),a(y,null,C(t.post.images,(i,h)=>(o(),a("button",{key:h,type:"button",class:"aspect-square overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-amber-500",onClick:K=>d.value=i},[s("img",{src:i,alt:`${t.post.title} — фото ${h+1}`,class:"h-full w-full object-cover"},null,8,U)],8,S))),128))])])):r("",!0),t.post.video_url?(o(),a("section",z,[e[4]||(e[4]=s("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Видео",-1)),s("div",D,[u(t.post.video_url)?(o(),a("iframe",{key:0,src:u(t.post.video_url),title:"Видео",class:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,E)):r("",!0)])])):t.post.video_file?(o(),a("section",I,[e[5]||(e[5]=s("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Видео",-1)),s("div",P,[s("video",{controls:"",class:"w-full",src:t.post.video_file}," Ваш браузер не поддерживает воспроизведение видео. ",8,A)])])):r("",!0),(o(),f(_,{to:"body"},[d.value?(o(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4",onClick:e[1]||(e[1]=B(i=>d.value=null,["self"]))},[s("button",{type:"button",class:"absolute right-4 top-4 text-white hover:text-gray-300","aria-label":"Закрыть",onClick:e[0]||(e[0]=i=>d.value=null)}," ✕ "),s("img",{src:d.value,alt:"Фото",class:"max-h-full max-w-full object-contain"},null,8,G)])):r("",!0)]))],64)):(o(),a("p",J,"Публикация не найдена или ещё не загружена."))])]}),_:1},8,["can-login","can-register"]))}});export{W as default};
