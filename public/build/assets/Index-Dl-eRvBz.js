import{d as w,c as f,w as C,a as o,b as $,e as I,h as B,o as s,i as a,j as d,t as h,F as x,q as p,n as L,T as j,f as V,l as m,x as k}from"./app-6f2fcCsN.js";import{_ as N}from"./PublicLayout.vue_vue_type_script_setup_true_lang-BE4tQFZz.js";const R={class:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8"},q={class:"mb-12"},z={key:0,class:"overflow-hidden rounded-lg bg-gray-900 shadow-lg"},F={class:"aspect-video w-full"},T=["src","title"],U=["src"],D={key:0,class:"bg-gray-800 px-4 py-2 text-sm text-gray-200"},E={key:1,class:"flex aspect-video items-center justify-center rounded-lg border border-dashed border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-gray-800"},M={key:0,class:"mb-12"},P={class:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3"},S=["onClick"],A={key:1},G={class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},H=["onClick"],J=["src","alt"],K={key:2,class:"rounded-lg border border-dashed border-gray-300 bg-gray-100 py-12 text-center text-gray-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400"},O=["src"],X=w({__name:"Index",props:{videoItems:{},imageItems:{},playlists:{},canLogin:{type:Boolean},canRegister:{type:Boolean}},setup(c){const b=c;function y(l){if(!l)return"";try{const e=new URL(l);if(e.hostname.includes("youtube.com")||e.hostname.includes("youtu.be")){const t=e.hostname==="youtu.be"?e.pathname.slice(1):e.searchParams.get("v");return t?`https://www.youtube.com/embed/${t}`:l}if(e.hostname.includes("vk.com")&&e.pathname.includes("video")){const t=l.match(/video(-?\d+)_(\d+)/);return t?`https://vk.com/video_ext.php?oid=${t[1]}&id=${t[2]}&hd=2`:l}return l}catch{return l}}const u=m(()=>b.videoItems??[]),g=k(0),r=m(()=>u.value[g.value]??null),v=m(()=>b.imageItems??[]),n=k(null);return(l,e)=>(s(),f(N,{title:"Медиа","can-login":c.canLogin,"can-register":c.canRegister},{default:C(()=>[o("div",R,[$(I(B),{title:"Медиа"}),e[6]||(e[6]=o("h1",{class:"mb-8 text-3xl font-bold text-gray-900 dark:text-white"},"Медиа",-1)),o("section",q,[e[3]||(e[3]=o("h2",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"},"Видео",-1)),r.value?(s(),a("div",z,[o("div",F,[r.value.video_url&&y(r.value.video_url)?(s(),a("iframe",{key:0,src:y(r.value.video_url),title:r.value.title??"Видео",class:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,T)):r.value.video_file?(s(),a("video",{key:1,controls:"",class:"h-full w-full",src:r.value.video_file}," Ваш браузер не поддерживает воспроизведение видео. ",8,U)):d("",!0)]),r.value.title?(s(),a("p",D,h(r.value.title),1)):d("",!0)])):(s(),a("div",E,[...e[2]||(e[2]=[o("span",{class:"text-gray-500 dark:text-gray-400"},"Добавьте видео в админке (Контент → Элементы медиа)",-1)])]))]),u.value.length?(s(),a("section",M,[e[4]||(e[4]=o("h2",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"},"Плейлист",-1)),o("ul",P,[(s(!0),a(x,null,p(u.value,(t,i)=>(s(),a("li",{key:t.id,class:L(["rounded-lg border transition",i===g.value?"border-amber-500 bg-amber-50 dark:border-amber-400 dark:bg-amber-900/20":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-750"])},[o("button",{type:"button",class:"w-full px-4 py-3 text-left text-sm font-medium text-gray-900 dark:text-white",onClick:_=>g.value=i},h(t.title??`Видео ${i+1}`),9,S)],2))),128))])])):d("",!0),v.value.length?(s(),a("section",A,[e[5]||(e[5]=o("h2",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"},"Галерея",-1)),o("div",G,[(s(!0),a(x,null,p(v.value,(t,i)=>(s(),a("button",{key:t.id,type:"button",class:"aspect-square overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-amber-500",onClick:_=>n.value=t.image??null},[t.image?(s(),a("img",{key:0,src:t.image,alt:t.title??`Фото ${i+1}`,class:"h-full w-full object-cover"},null,8,J)):d("",!0)],8,H))),128))])])):(s(),a("div",K," Изображений пока нет. Добавьте в админке (Контент → Элементы медиа, тип «Изображение»). ")),(s(),f(j,{to:"body"},[n.value?(s(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4",onClick:e[1]||(e[1]=V(t=>n.value=null,["self"]))},[o("button",{type:"button",class:"absolute right-4 top-4 text-white hover:text-gray-300","aria-label":"Закрыть",onClick:e[0]||(e[0]=t=>n.value=null)}," ✕ "),o("img",{src:n.value,alt:"Фото",class:"max-h-full max-w-full object-contain"},null,8,O)])):d("",!0)]))])]),_:1},8,["can-login","can-register"]))}});export{X as default};
