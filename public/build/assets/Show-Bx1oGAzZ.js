import{d as U,n as C,c as F,w as g,f as r,a as f,u as n,h as L,o,b as s,e as i,x as N,q as T,F as V,t as c,l as $,s as l,z as m,v as D,m as q}from"./app-BTVi4zqZ.js";import{_ as E}from"./PublicLayout.vue_vue_type_script_setup_true_lang-ulzpU09i.js";import{_ as H}from"./ProgressBar.vue_vue_type_script_setup_true_lang-DZpX7w5H.js";const R={class:"mx-auto max-w-3xl px-4 py-12 sm:px-6 lg:px-8"},z=["content"],j=["href"],A=["content"],G=["content"],I=["content"],J=["content"],K={class:"mt-4 text-3xl font-bold text-gray-900 dark:text-white"},O={key:0,class:"mt-6"},P=["innerHTML"],Q={class:"mt-10 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800"},W={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},X={class:"flex items-center"},Y=["disabled"],Z={key:1,class:"text-sm text-green-600 dark:text-green-400"},_={key:1,class:"mt-8 text-gray-500 dark:text-gray-400"},ae=U({__name:"Show",props:{id:{},fundraiser:{},canLogin:{type:Boolean},canRegister:{type:Boolean}},setup(e){const B=e,a=C({amount:"",donor_name:"",donor_email:"",message:"",is_anonymous:!1}),u=q(null);function M(){u.value=null,a.post(route("fundraisers.donate",B.id),{preserveScroll:!0,onSuccess:()=>{u.value="Спасибо! Пожертвование учтено.",a.reset("amount","donor_name","donor_email","message","is_anonymous")}})}return(S,t)=>(o(),F(E,{title:"Сбор","can-login":e.canLogin,"can-register":e.canRegister},{default:g(()=>{var y,b;return[r("div",R,[f(n(L),{title:((y=e.fundraiser)==null?void 0:y.meta_title)??((b=e.fundraiser)==null?void 0:b.title)??"Сбор"},{default:g(()=>{var d,x,k,v,w,h,p;return[(d=e.fundraiser)!=null&&d.meta_description?(o(),s("meta",{key:0,name:"description",content:e.fundraiser.meta_description},null,8,z)):i("",!0),(x=e.fundraiser)!=null&&x.canonical_url?(o(),s("link",{key:1,rel:"canonical",href:e.fundraiser.canonical_url},null,8,j)):i("",!0),((k=e.fundraiser)==null?void 0:k.meta_title)??((v=e.fundraiser)==null?void 0:v.title)?(o(),s("meta",{key:2,property:"og:title",content:e.fundraiser.meta_title??e.fundraiser.title},null,8,A)):i("",!0),(w=e.fundraiser)!=null&&w.meta_description?(o(),s("meta",{key:3,property:"og:description",content:e.fundraiser.meta_description},null,8,G)):i("",!0),(h=e.fundraiser)!=null&&h.og_image?(o(),s("meta",{key:4,property:"og:image",content:e.fundraiser.og_image},null,8,I)):i("",!0),(p=e.fundraiser)!=null&&p.canonical_url?(o(),s("meta",{key:5,property:"og:url",content:e.fundraiser.canonical_url},null,8,J)):i("",!0),t[5]||(t[5]=r("meta",{property:"og:type",content:"website"},null,-1))]}),_:1},8,["title"]),f(n(N),{href:S.route("fundraisers.index"),class:"text-sm text-amber-600 hover:text-amber-500 dark:text-amber-400"},{default:g(()=>[...t[6]||(t[6]=[T(" ← К списку сборов ",-1)])]),_:1},8,["href"]),e.fundraiser?(o(),s(V,{key:0},[r("h1",K,c(e.fundraiser.title),1),e.fundraiser.raised!=null&&e.fundraiser.goal!=null?(o(),s("div",O,[f(H,{value:e.fundraiser.raised,max:e.fundraiser.goal,label:`Собрано ${e.fundraiser.raised} из ${e.fundraiser.goal}`},null,8,["value","max","label"])])):i("",!0),e.fundraiser.description?(o(),s("div",{key:1,class:"mt-6 text-gray-600 dark:text-gray-300 prose prose-lg dark:prose-invert max-w-none",innerHTML:e.fundraiser.description},null,8,P)):i("",!0),r("section",Q,[t[12]||(t[12]=r("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Поддержать",-1)),r("form",{onSubmit:$(M,["prevent"]),class:"mt-4 space-y-4"},[r("div",null,[t[7]||(t[7]=r("label",{for:"amount",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Сумма (₽) *",-1)),l(r("input",{id:"amount","onUpdate:modelValue":t[0]||(t[0]=d=>n(a).amount=d),type:"number",min:"1",step:"1",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[m,n(a).amount,void 0,{number:!0}]]),n(a).errors.amount?(o(),s("p",W,c(n(a).errors.amount),1)):i("",!0)]),r("div",X,[l(r("input",{id:"is_anonymous","onUpdate:modelValue":t[1]||(t[1]=d=>n(a).is_anonymous=d),type:"checkbox",class:"rounded border-gray-300 text-amber-600 focus:ring-amber-500 dark:border-gray-600 dark:bg-gray-700"},null,512),[[D,n(a).is_anonymous]]),t[8]||(t[8]=r("label",{for:"is_anonymous",class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Анонимно",-1))]),n(a).is_anonymous?i("",!0):(o(),s(V,{key:0},[r("div",null,[t[9]||(t[9]=r("label",{for:"donor_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Имя",-1)),l(r("input",{id:"donor_name","onUpdate:modelValue":t[2]||(t[2]=d=>n(a).donor_name=d),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[m,n(a).donor_name]])]),r("div",null,[t[10]||(t[10]=r("label",{for:"donor_email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),l(r("input",{id:"donor_email","onUpdate:modelValue":t[3]||(t[3]=d=>n(a).donor_email=d),type:"email",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[m,n(a).donor_email]])])],64)),r("div",null,[t[11]||(t[11]=r("label",{for:"message",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Сообщение (необязательно)",-1)),l(r("textarea",{id:"message","onUpdate:modelValue":t[4]||(t[4]=d=>n(a).message=d),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[m,n(a).message]])]),r("button",{type:"submit",disabled:n(a).processing,class:"rounded-md bg-amber-600 px-4 py-2 text-sm font-medium text-white hover:bg-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 dark:focus:ring-offset-gray-800"}," Отправить ",8,Y),u.value?(o(),s("p",Z,c(u.value),1)):i("",!0)],32)])],64)):(o(),s("p",_,"Сбор не найден."))])]}),_:1},8,["can-login","can-register"]))}});export{ae as default};
